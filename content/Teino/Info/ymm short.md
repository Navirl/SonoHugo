---
tags:
  - Info
---

date:: [2024-09-09](/Daily_Note/2024-09-09.md)
up:: [YMM](../Bar/App/YukkriMovieMaker.md)

# short
通常、YMM4から直接アリアルを呼ぶとアクセントや間の調整が出来ません。
しかしCoefontからいちいちファイルをDLして配置するのは面倒です。
そのためAoiSupportというソフトを使用してDLから配置までの手間を自動化します。

以下はあくまで一例であり、目的は面白くテンポの良いショート動画を素早く作ることであることを留意してください。
使うもの
AoiSupport
Coefont
YukkuriMovieMaker4 (YMM4)
各種設定例
AoiSupport




Coefont


YMM4
動画設定

part 1_0


part 1_1


タイトル

タイトル文



タイトルの黄色い部分

画像






オープニングの画像

音声

出力








実手順
AoiSupportを起動、その後YMM4を起動
ブラウザでCoefontのプロジェクトを開き、ボイスを入力・修正
ボイスを出力し、AoiSupportによりYMM4へ投げ込み・調整
画像を集めてYMM4上に並べ調整
出力

手順詳細

AoiSupportを起動。設定通りならYMM4がつく。


Coefont。上からpart 1_0、part 1_1。
変更するブロック設定は両方音量200%、スピードx1.10、句点・読点0.01s。
喋って欲しいほうにどんどんテキストを入れていき、全部できたら発音を修正する。
Enterでブロック内で文字列を分けて入力できる。

書き切ったら発音確認と修正。
特に名前の読みは検索交えて確認、ついでに画像集めするとロスなく早い。
酒井法子などひっかかりやすい読みがたまにある。


出来上がったらブロックごとにDLボタンを押し出力。文章ごとに分割、.wavを選択。
字幕も出力する場合は音声ファイル＋テキストファイルを使用する。
設定が合っていればYMM4に自動でフォーカスが合い、一気に文章が挿入されていく。
アイテムの位置、文章内の改行は当然未調整なのでここで都度修正。

また、仕様としてブロック内で例えば20の文章がある場合、配置は1~10ではなく1,10~19
, 2, 20,3〜8となる。多分単純な名前順整理しかしてないせい。忘れず並べ替えしておくこと。

あとは適当に画像集めてアイテム配置とサイズ調整を行って出力する。
ちなみに数値スクロールの上でCtrl+ホイールスクロールで1刻みで数値を動かせる。Ctrl+Shift+ホイールスクロールで10刻み。
設定解説
YMM4、AoiSupportはDLしてある前提。連動起動と3.の投げ込みのため、いくつか設定を変更する。
基本設定で保存フォルダパス。
常時フォルダ監視設定で保存設定とキャラ設定。
YMM4設定で投げ込み方式。
連動起動設定で同時起動。
AoiSuppport

基本設定。音声保存先設定のみ入力する。
ここに入る.wav、.txt、.zipを対象に自動操作してくれる。ブラウザのDL先を指定しておけば手間が無い。
そのためDL先を変更しても問題ないブラウザがあると、SEなど別のwavアイテムが間違って入らず便利。速度とWindowsユーザー間の互換性を考慮してEdgeがおすすめ。



常時フォルダ監視設定。先ほど設定した保存先フォルダを監視出来るようにしておく。
また挿入先レイヤーの指定が重要。Coefontを使用する場合、ファイル名の一部に含まれている文字列にしなければならない。ここで指定しているのはファイル名のうちブロックごとに変更される部分。このレイヤーごとにキャラを分ける事になる。
どこかでCoefontの仕様変更が入ってファイル名が変わった場合、こことYMM4のキャラ名をそれに合わせて変更する。
その右のレイヤー番号はYMM4の場合関係ないのでデフォルトでいい。
YMM4設定。基本的に2でいい。
カスタムボイスはYMM4上で音声を合成するのではなく、wavファイルをボイスアイテムとして貼り付けるための機能。
1を使う場合、DLフォルダから自動でキャラごとのカスタムボイスフォルダへwavやtxtを移動してくれるため、DLフォルダがクリーンに保たれる。ただしカスタムボイスの設定をしなければならない、カスタムボイスなので後から音声ファイルだけ書き換える事は出来ない。連動起動設定。AoiSupportはYMM4より先に起動しなければ上手く動かない。
そのためここで連動起動を設定し、AoiSupportを通してのみYMM4を起動するようにすればトラブルを回避できる。
YMM4




YMM4側のキャラ設定。ここではPart 1_0を上字幕、Part 1_1を下字幕として扱う。
常時フォルダ監視設定で入力したのと同じキャラ名をつけて設定する。
折りたたんであるがカスタムボイスを使う場合はwavやtxtを移動させたいフォルダを設定しておく。
音量は100%。デフォだと50%のはずなので注意。
字幕はその時々で見やすいように修正を入れる。

画像の設定。位置とクリッピングは画像や文章に合わせて調整。



https://support.google.com/youtube/answer/1722171
ビットレート設定をしないと1920x1080なのに720でエンコードされるということが起きる。注意。
MediaFoundationでもビットレートと音量最大化さえしていれば問題ない。

音声

開幕で音声が盛り上がるようにしている。
よくある質問・豆知識
Coefont
初めの五字がファイル名に追加されるが、ここにファイル名に使えない文字が入ると展開できず上手く動かない（\/:*?”<>|）
江頭2:50や"引用"などに注意、江頭二時五十分など読みは同じものにして後で修正する

ファイル名に使えても何故かAoiSupportで引っかかることがある、高橋奎二など
そういうときは諦めて手動でファイルパスを入力（通常のカスタムボイスの入力方法）していく。テキストを入れるとこにwavファイルをドラッグアンドドロップするとパスが入るので、そのままEnterを押せば自動でwavファイルを読み込んでくれる。

改行のある文字列をコピペすると改行が入れられるが、区切りたくないところに読点が入る可能性が高い
音声修正より字幕修正の方が楽なので、改行無しで入力してYMM4上で改行する
YMM4
改行ボタンを押せばテキストは改行できるが、Shift+Enterでも改行できる

後から変更を入れてちょっとずれが発生した場合
アイテムの上で右クリックの「選択中のアイテムの右のアイテムを選択」
タイムライン上の右クリックの「右のアイテムをすべて選択」「空白を追加」「隙間を削除」
が便利

非表示にすると音声もOFFになる

光と音の速さ上、多少文字が先に出ても問題ない
何なら少しリアルになる

画像を選ぶ際は日付順で並べるといい、ただしファイル自体に日付があるとそちらが優先されるので信じすぎない

画像ファイルを選ぶときのダイアログもエクスプローラー、画像を自前でプロジェクトフォルダに分けている場合のDLフォルダからプロジェクトフォルダへのファイル移動はここでやるとタイムロスが無く早い

ブラウザや検索エンジンによっては出てくるth-数字 みたいな画像ファイルは、ファイルの拡張子を表示→ファイル末尾に.jpgを付け足す、とすれば読み込み可能になる（画像として認識させるのを強制する）
このファイルは画像ファイル選択では出てこないが、右下の画像ファイルを全てのファイルに変更すれば出る
一応そのままクリックすれば読める
あるいは普通にエクスプローラーから見ればある
正直手間なのでブラウザか検索エンジン変えたほうが良い

ボイスより字幕を先出ししたい場合は、右クリック→「ボイスアイテムの字幕をテキストアイテムとして分離」を使う
元のボイスアイテムの字幕は自動で非表示になる
もちろんこの状態でボイスアイテムの字幕を編集しても画面に出る字幕は変わらない、テキストアイテムを編集する



その他

早く仕事を終わらせたい場合は、出来る限り1つのタスクのみ集中して解けるようにするといい
画像DL→画像位置調整→テキスト位置調整...などタスクを切り替える場面は出来るだけ減らしたほうが良いという話
ただし人によっては画像DL→画像位置調整を一つのタスクとして認識している（チャンク化している）などがあるため、そこを無理してばらす必要はない
あまりこだわって仕事を早く終わらせるという目的を見失わないように

ショート動画は上下に黒味が入る
1080x1920なら大体y-800.0~570.0以内に収めておけば黒味に引っかからず見やすい
(今は数値変わってるかもしれないのでたまに確認)

参考動画は何らかの方法でローカルにダウンロードして自前のプレイヤーで見たほうが良い
一時停止や巻き戻しが楽になるので
プレイヤーはvlcやmpv.netなどがおすすめ

大抵のプレイヤーでは,(コンマ)で一コマ戻し、.(ピリオド)で一コマ送りが使える
長押し可
Youtubeでもこのショートカットは使用可能、ただしYoutubeショートでは使用不能

マウスにコピペコマンドを仕込むと楽になる、LogicoolならLogiOptionで設定可能
あるいはショートカットコマンドを覚えると楽になる
出来るだけマウスとキーボードの切り替え回数を少なくする

Win+Shift+Tab→Tabでウィンドウが切り替えられる
キーボードから手を離したくないときに

一般画像を使う場合はPixabayやPhotoACとか活用

ディスコで動画を送る場合、たいてい重すぎて送れない(無料だと25MBまで)のでVP9(WebM)に変換するとよい
hevc(h265)とかAV1とかは現在(2024/03/26)未対応
ffmpeg -i inputPath -c:v libvpx-vp9 outputPath
1920x1080なら-threads 8をオプションとして付けると早くなる
qsvが使える環境なら早くなるかもしれない、ffmpeg -codecs | Select-Strings vp9でqsvエンコーダを調べて使用してみる

あるいはそれ専用のpythonコードがgithubにある、ff4dとかいうの
それを使ってもいい、必ず25MBにしてくれるのが強み
まあたぶんffmpegだけでも工夫すれば出来るだろうが

本当に文字の読みが分からない場合は、手書き入力する
IMEを右クリック→IMEパッドで出る